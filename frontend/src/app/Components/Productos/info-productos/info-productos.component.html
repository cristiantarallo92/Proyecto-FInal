<div class="container"> 
    <div class="row">
        <div class="col-12">
            <h3 class="navbar navbar-dark bg-dark text-light p-3">
                {{modal.modalTitle}}
            </h3>
        </div>
    </div>
    <div class="row d-flex  align-content-stretch flex-wrap">
        <div class="col-6 d-flex  align-items-stretch">
            <form class="was-validated" [formGroup]="productForm">
                <div class="col-12 d-flex flex-row">
                    <div class="col-12 d-flex flex-column">
                        <div>
                            <label for="name" class="form-label">  Producto </label>
                        </div>
                        <div class="d-flex flex-column">
                            <div class="d-flex flex-row">
                                <input type="text" class="form-control me-2" id="name" placeholder="Ingrese Produto"
                                    formControlName="name" required>
                                <div *ngIf="modal.modalMode">
                                    <ng-container *ngIf="formInputs[0].editMode">
                                        <button class="btn btn-light" (click)="editControl('name')" type="submit">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-pencil-fill" viewBox="0 0 16 16">
                                                <path
                                                    d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z" />
                                            </svg>
                                        </button>
                                    </ng-container>
                                    <ng-container *ngIf="formInputs[0].saveMode">
                                        <button [disabled]="this.productForm.get('name').invalid" class="btn btn-light"
                                            (click)="saveControl('name')" type="submit">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-floppy-fill" viewBox="0 0 16 16">
                                                <path
                                                    d="M0 1.5A1.5 1.5 0 0 1 1.5 0H3v5.5A1.5 1.5 0 0 0 4.5 7h7A1.5 1.5 0 0 0 13 5.5V0h.086a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5H14v-5.5A1.5 1.5 0 0 0 12.5 9h-9A1.5 1.5 0 0 0 2 10.5V16h-.5A1.5 1.5 0 0 1 0 14.5z" />
                                                <path
                                                    d="M3 16h10v-5.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5zm9-16H4v5.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5zM9 1h2v4H9z" />
                                            </svg>
                                        </button>
                                    </ng-container>
                                </div>
                            </div>
                            <div class="mt-2">
                                <div
                                    *ngIf="( ( (this.productForm.get('name').hasError('required') && modal.modalMode) || (this.productForm.get('name').hasError('required') && this.productForm.get('name').touched && modal.modalMode == false) ) 
                                                && this.emptyForm) ">
                                    <p class="text-danger h6"> Este campo es obligatorio </p>
                                </div>
                                <div
                                    *ngIf="this.productForm.get('name').hasError('minlength')  || this.productForm.get('name').hasError('maxlength')">
                                    <p class="text-danger h6"> Este campo admite entre 5 y 50 caracteres </p>   
                                </div>
                            </div>
                        </div>
                    </div>     
                </div>
                <div class="col-12 d-flex flex-row">
                    <div class="col-12 d-flex flex-column">
                        <div class="col-12">
                            <label for="description" class="form-label"> Descripcion  </label>
                        </div>
                        <div class="col-12">
                            <div class="d-flex">
                                <input type="text" class="form-control me-2" id="description"
                                    placeholder="Ingrese una description" formControlName="description" required>
                                <div *ngIf="modal.modalMode">
                                    <ng-container *ngIf="formInputs[1].editMode">
                                        <button class="btn btn-light" (click)="editControl('description')" type="submit">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                                class="bi bi-pencil-fill" viewBox="0 0 16 16">
                                                <path
                                                    d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z" />
                                            </svg>
                                        </button>
                                    </ng-container>
                                    <ng-container *ngIf="formInputs[1].saveMode">
                                        <button [disabled]="this.productForm.get('description').invalid" class="btn btn-light"
                                            (click)="saveControl('description')">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                                class="bi bi-floppy-fill" viewBox="0 0 16 16">
                                                <path
                                                    d="M0 1.5A1.5 1.5 0 0 1 1.5 0H3v5.5A1.5 1.5 0 0 0 4.5 7h7A1.5 1.5 0 0 0 13 5.5V0h.086a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5H14v-5.5A1.5 1.5 0 0 0 12.5 9h-9A1.5 1.5 0 0 0 2 10.5V16h-.5A1.5 1.5 0 0 1 0 14.5z" />
                                                <path
                                                    d="M3 16h10v-5.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5zm9-16H4v5.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5zM9 1h2v4H9z" />
                                            </svg>
                                        </button>
                                    </ng-container>
                                </div>
                            </div>
                            <div class="mt-2">
                                <div
                                    *ngIf="( ( (this.productForm.get('description').hasError('required') && modal.modalMode ) || (this.productForm.get('description').hasError('required') && this.productForm.get('name').touched &&modal.modalMode == false) )
                                                && this.emptyForm )">
                                    <p class="text-danger h6"> Este campo es obligatorio </p>
                                </div>
                                <div
                                    *ngIf="this.productForm.get('description').hasError('minlength')  || this.productForm.get('name').hasError('description')">
                                    <p class="text-danger h6"> Este campo admite entre 5 y 100 caracteres </p>   
                                </div>
                            </div>
                        </div>
                    </div> 
                </div>
                <div class="col-12  d-flex flex-row">
                    <div class="col-6   p-1 d-flex flex-column"> 
                        <div>
                            <label for="inputState" class="form-label"> Categoria </label>
                        </div>
                        <div class="d-flex">
                            <select id="inputState" class="form-select me-2" formControlName="category">
                                <option *ngIf="!modal.modalMode" hidden selected> Seleccione una categoria </option>
                                <option *ngIf="modal.modalMode" hidden selected> {{ this.productForm.controls['category'].value }} </option> 
                                <option *ngFor="let c of categories"> {{c.name}} </option>
                            </select>
                            <div *ngIf="modal.modalMode">
                                <ng-container *ngIf="formInputs[2].editMode">
                                    <button class="btn btn-light" (click)="editControl('category')">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                            class="bi bi-pencil-fill" viewBox="0 0 16 16">
                                            <path
                                                d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z" />
                                        </svg>
                                    </button>
                                </ng-container>
                                <ng-container *ngIf="formInputs[2].saveMode">
                                    <button class="btn btn-light" (click)="saveControl('category')">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                            class="bi bi-floppy-fill" viewBox="0 0 16 16">
                                            <path
                                                d="M0 1.5A1.5 1.5 0 0 1 1.5 0H3v5.5A1.5 1.5 0 0 0 4.5 7h7A1.5 1.5 0 0 0 13 5.5V0h.086a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5H14v-5.5A1.5 1.5 0 0 0 12.5 9h-9A1.5 1.5 0 0 0 2 10.5V16h-.5A1.5 1.5 0 0 1 0 14.5z" />
                                            <path
                                                d="M3 16h10v-5.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5zm9-16H4v5.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5zM9 1h2v4H9z" />
                                        </svg>
                                    </button>
                                </ng-container>
                            </div>
                        </div>
                        <div class="mt-2">
                            <div *ngIf="( ( this.productForm.get('category').hasError('required') && modal.modalMode) || (this.productForm.get('category').hasError('required') && this.productForm.get('category').touched && modal.modalMode == false) )  && this.emptyForm"> 
                                <p class="text-danger h6"> Necesita asignar una categoria al producto </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 p-1 d-flex flex-column">
                        <div>
                            <label for="inputState" class="form-label"> Marca </label>
                        </div>
                        <div class="d-flex">
                            <select id="inputState" class="form-select me-2" formControlName="brand">
                                <option *ngIf="!modal.modalMode" hidden selected> Seleccione una marca </option>
                                <option *ngIf="modal.modalMode"> {{ this.productForm.controls['brand'].value }}</option>
                                <option *ngFor="let b of brands"> {{b.name}} </option>
                            </select>
                            <div *ngIf="modal.modalMode">
                                <ng-container *ngIf="formInputs[3].editMode">
                                    <button class="btn btn-light" (click)="editControl('brand')">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                            class="bi bi-pencil-fill" viewBox="0 0 16 16">
                                            <path
                                                d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z" />
                                        </svg>
                                    </button>
                                </ng-container>
                                <ng-container *ngIf="formInputs[3].saveMode">
                                    <button class="btn btn-light" (click)="saveControl('brand')">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                            class="bi bi-floppy-fill" viewBox="0 0 16 16">
                                            <path
                                                d="M0 1.5A1.5 1.5 0 0 1 1.5 0H3v5.5A1.5 1.5 0 0 0 4.5 7h7A1.5 1.5 0 0 0 13 5.5V0h.086a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5H14v-5.5A1.5 1.5 0 0 0 12.5 9h-9A1.5 1.5 0 0 0 2 10.5V16h-.5A1.5 1.5 0 0 1 0 14.5z" />
                                            <path
                                                d="M3 16h10v-5.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5zm9-16H4v5.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5zM9 1h2v4H9z" />
                                        </svg>
                                    </button>
                                </ng-container>
                            </div>
                        </div>
                        <div class="mt-2">
                <!--              <div *ngIf="(this.productForm.get('brand').hasError('required') && this.productForm.get('brand').touched && modal.modalMode == false)"> -->   
                                   <div *ngIf="( ( this.productForm.get('brand').hasError('required') && modal.modalMode) || (this.productForm.get('brand').hasError('required') && this.productForm.get('brand').touched && modal.modalMode == false) )  && this.emptyForm"> 
                                <p class="text-danger h6"> Necesita asignar una marca al producto </p>
                            </div>
                        </div>
                    </div>   
                </div>
                <div class="col-12 d-flex flex-row">
                    <div class="col-6  p-1"> 
                        <label for="exampleFormControlInput1" class="form-label"> Stock </label>
                        <div class="d-flex">
                            <input type="number" class="form-control me-2" id="exampleFormControlInput1"
                                placeholder="Ingrese stock del producto" formControlName="stock">
                            <div *ngIf="modal.modalMode">
                                <ng-container *ngIf="formInputs[4].editMode">
                                    <button class="btn btn-light" (click)="editControl('stock')">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                            class="bi bi-pencil-fill" viewBox="0 0 16 16">
                                            <path
                                                d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z" />
                                        </svg>
                                    </button>
                                </ng-container>
                                <ng-container *ngIf="formInputs[4].saveMode">
                                    <button [disabled]="this.productForm.get('stock').invalid" class="btn btn-light"
                                        (click)="saveControl('stock')">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                            class="bi bi-floppy-fill" viewBox="0 0 16 16">
                                            <path
                                                d="M0 1.5A1.5 1.5 0 0 1 1.5 0H3v5.5A1.5 1.5 0 0 0 4.5 7h7A1.5 1.5 0 0 0 13 5.5V0h.086a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5H14v-5.5A1.5 1.5 0 0 0 12.5 9h-9A1.5 1.5 0 0 0 2 10.5V16h-.5A1.5 1.5 0 0 1 0 14.5z" />
                                            <path
                                                d="M3 16h10v-5.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5zm9-16H4v5.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5zM9 1h2v4H9z" />
                                        </svg>
                                    </button>
                                </ng-container>
                            </div>
                        </div>
                        <div class="mt-2">
                            <div
                                *ngIf="( ( this.productForm.get('stock').hasError('required') && modal.modalMode) || (this.productForm.get('stock').hasError('required') && this.productForm.get('stock').touched && modal.modalMode == false) )  && this.emptyForm">
                                <p class="text-danger h6"> Este campo es obligatorio </p>
                            </div>
                            <div *ngIf="this.productForm.get('stock').hasError('pattern')">
                                <p class="text-danger h6"> Ingrese un stock valido </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-6  p-1">
                        <label for="exampleFormControlInput1" class="form-label"> Precio </label>
                        <div class="d-flex">
                            <input type="number" class="form-control me-2" id="exampleFormControlInput1"
                                placeholder="Ingrese precio del producto" formControlName="price">
                            <div *ngIf="modal.modalMode">
                                <ng-container *ngIf="formInputs[5].editMode">
                                    <button class="btn btn-light" (click)="editControl('price')">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                            class="bi bi-pencil-fill" viewBox="0 0 16 16">
                                            <path
                                                d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z" />
                                        </svg>
                                    </button>
                                </ng-container>
                                <ng-container *ngIf="formInputs[5].saveMode">
                                    <button [disabled]="this.productForm.get('price').invalid" class="btn btn-light"
                                        (click)="saveControl('price')">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                            class="bi bi-floppy-fill" viewBox="0 0 16 16">
                                            <path
                                                d="M0 1.5A1.5 1.5 0 0 1 1.5 0H3v5.5A1.5 1.5 0 0 0 4.5 7h7A1.5 1.5 0 0 0 13 5.5V0h.086a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5H14v-5.5A1.5 1.5 0 0 0 12.5 9h-9A1.5 1.5 0 0 0 2 10.5V16h-.5A1.5 1.5 0 0 1 0 14.5z" />
                                            <path
                                                d="M3 16h10v-5.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5zm9-16H4v5.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5zM9 1h2v4H9z" />
                                        </svg>
                                    </button>
                                </ng-container>
                            </div>
                        </div>
                        <div class="mt-2">
                            <div
                                *ngIf="( (this.productForm.get('price').hasError('required') && modal.modalMode) || (this.productForm.get('price').hasError('required') && this.productForm.get('price').touched && modal.modalMode == false) )  && this.emptyForm ">
                                <p class="text-danger h6"> Este campo es obligatorio </p>
                            </div>
                            <div *ngIf="this.productForm.get('price').hasError('pattern')">
                                <p class="text-danger h6"> Ingrese un precio valido </p>
                            </div>
                        </div>
                    </div>
                </div>
            </form>    
        </div>
        <div class="col-6 d-flex  justify-content-center align-content-araound flex-wrap">
             <div class="ratio ratio-4x3 border border-3 rounded overflow-hidden p-2">
                <img *ngIf="prevImage" [src]="prevImage" class="w-100 h-100 object-fit-contain"> 
             </div>
             <div class="p-2">
                <input   (change)="addImage($event)" class="form-control form-control-lg" id="image" type="file">
            </div>    
        </div>
    </div>
    <div class="row">
        <div class="col-12 d-flex justify-content-center">
            <div class="mt-3" mat-dialog-actions>
                <button class="btn btn-dark" type="submit" mat-raised-button 
                    [disabled]="this.productForm.invalid"  (click)="saveModal()" > Guardar </button>
                <button class="btn btn-dark" type="submit" mat-raised-button (click)="cancelModal()"> Cancelar </button>
            </div>
        </div>
    </div>    
</div>
    
